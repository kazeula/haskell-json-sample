-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


-- | Initial project template from stack
--   
--   Please see README.md
@package haskell-json-sample
@version 0.1.0.0

module WeatherTool.JsonScheme
data Location
Location :: Text -> Text -> Text -> Location
_area :: Location -> Text
_prefecture :: Location -> Text
_city :: Location -> Text
prefecture :: Lens' Location Text
city :: Lens' Location Text
area :: Lens' Location Text
data Forecast
Forecast :: Text -> Text -> Text -> Forecast
_date :: Forecast -> Text
_dateLabel :: Forecast -> Text
_telop :: Forecast -> Text
telop :: Lens' Forecast Text
dateLabel :: Lens' Forecast Text
date :: Lens' Forecast Text

-- | 天気APIの返り値JSONの仕様です。 参照:
--   <a>http://weather.livedoor.com/weather_hacks/webservice</a>
data Weather
Weather :: Text -> Text -> Location -> [Forecast] -> Weather
_title :: Weather -> Text
_publicTime :: Weather -> Text
_location :: Weather -> Location
_forecasts :: Weather -> [Forecast]
title :: Lens' Weather Text
publicTime :: Lens' Weather Text
location :: Lens' Weather Location
forecasts :: Lens' Weather [Forecast]
instance Eq Weather
instance Show Weather
instance FromJSON Weather
instance Eq Forecast
instance Show Forecast
instance FromJSON Forecast
instance Eq Location
instance Show Location
instance FromJSON Location

module WeatherTool

-- | APIを呼び、CityCodeで指定された地点の天気を取得します。 API呼び出しに失敗した場合はEitherに例外を包んで返します。
requestWeather :: ApiSetting -> CityCode -> IO WeatherResponse

-- | requestWeatherを呼び、CityCode付きで返します。
requestWeatherWithCode :: ApiSetting -> CityCode -> IO (CityCode, WeatherResponse)

-- | APIのための設定(現在はURLのみ)
data ApiSetting
ApiSetting :: String -> ApiSetting
_url :: ApiSetting -> String
url :: Iso' ApiSetting String

-- | デフォルトの設定
defaultSetting :: ApiSetting

-- | 地域を示すID。 参照:
--   <a>http://weather.livedoor.com/forecast/rss/primary_area.xml</a>
type CityCode = Text

-- | requestWeatherの返り値。失敗時は例外が入ります。(throwはされません)。
type WeatherResponse = Either SomeException Weather

-- | 天気APIの返り値JSONの仕様です。 参照:
--   <a>http://weather.livedoor.com/weather_hacks/webservice</a>
data Weather
Weather :: Text -> Text -> Location -> [Forecast] -> Weather
_title :: Weather -> Text
_publicTime :: Weather -> Text
_location :: Weather -> Location
_forecasts :: Weather -> [Forecast]
area :: Lens' Location Text
prefecture :: Lens' Location Text
city :: Lens' Location Text
forecasts :: Lens' Weather [Forecast]
data Location
Location :: Text -> Text -> Text -> Location
_area :: Location -> Text
_prefecture :: Location -> Text
_city :: Location -> Text
title :: Lens' Weather Text
publicTime :: Lens' Weather Text
location :: Lens' Weather Location
data Forecast
Forecast :: Text -> Text -> Text -> Forecast
_date :: Forecast -> Text
_dateLabel :: Forecast -> Text
_telop :: Forecast -> Text
date :: Lens' Forecast Text
dateLabel :: Lens' Forecast Text
telop :: Lens' Forecast Text
instance Show ApiSetting
instance Eq ApiSetting
